var E=Object.defineProperty;var b=(o,e,t)=>e in o?E(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var a=(o,e,t)=>(b(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const w={image:{png:"./images/avatars/image-juliusomo.png",webp:"./images/avatars/image-juliusomo.webp"},username:"juliusomo"},L=[{id:1,content:"Impressive! Though it seems the drag feature could be improved. But overall it looks incredible. You've nailed the design and the responsiveness at various breakpoints works really well.",createdAt:"1 month ago",score:12,user:{image:{png:"./images/avatars/image-amyrobson.png",webp:"./images/avatars/image-amyrobson.webp"},username:"amyrobson"},replies:[]},{id:2,content:"Woah, your project looks awesome! How long have you been coding for? I'm still new, but think I want to dive into React as well soon. Perhaps you can give me an insight on where I can learn React? Thanks!",createdAt:"2 weeks ago",score:5,user:{image:{png:"./images/avatars/image-maxblagun.png",webp:"./images/avatars/image-maxblagun.webp"},username:"maxblagun"},replies:[{id:3,content:"If you're still new, I'd recommend focusing on the fundamentals of HTML, CSS, and JS before considering React. It's very tempting to jump ahead but lay a solid foundation first.",createdAt:"1 week ago",score:4,replyingTo:"maxblagun",user:{image:{png:"./images/avatars/image-ramsesmiron.png",webp:"./images/avatars/image-ramsesmiron.webp"},username:"ramsesmiron"}},{id:4,content:"I couldn't agree more with this. Everything moves so fast and it always seems like everyone knows the newest library/framework. But the fundamentals are what stay constant.",createdAt:"2 days ago",score:2,replyingTo:"ramsesmiron",user:{image:{png:"./images/avatars/image-juliusomo.png",webp:"./images/avatars/image-juliusomo.webp"},username:"juliusomo"}}]}],h={currentUser:w,comments:L},m=(...o)=>{const e=document.createElement("div");return e.classList.add(...o),e},d=(o,e,t=!1)=>{const n=o.username===e.user.username,s='<span class="comment__you">you</span>',c=`
    <div class="comment__options">
      
    <div class="comment__delete">
      <img src="images/icon-delete.svg" alt="Delete" />
      <button class="comment__delete-button" aria-label="Delete">Delete</button>
    </div>
      
    <div class="comment__edit">
      <img src="images/icon-edit.svg" alt="Edit" />
      <button class="comment__edit-button" aria-label="Edit">Edit</button>
    </div>
    </div>`,l=`
    <div class="comment__reply">
      <img src="images/icon-reply.svg" alt="Reply" />
      <button class="comment__reply-button" aria-label="Reply">Reply</button>
    </div>`,g=`<p class="comment__text">${e.content}</p>`,_=`
  <textarea
    class="respond__textarea edit__textarea"
    name="text"
    placeholder="Add a comment...">${e.content}</textarea>
  `,f='<button class="respond__button update__button" type="submit" aria-label=Update>Update</button>';return`
    <div class="comment__user">
      <img
        class="comment__user-image"
        src="${e.user.image.png}"
        alt="${e.user.username}"
      />
      <span class="comment__username">${e.user.username}</span>
      ${n?s:""}
      <span class="comment__createdAt">${e.createdAt}</span>
    </div>
    ${t?_:g}
    <div class="comment__vote">
      <button class="vote__upvote" aria-label="Upvote">+</button>
      <span class="vote__score" aria-label="Score">${e.score}</span>
      <button class="vote__downvote" aria-label="Downvote">-</button>
    </div>
    ${t?"":n?c:l}
    ${t?f:""}
  `},u=(o,e,t)=>{const n=document.createElement("form");n.classList.add("comment__container","respond");const s=`@${t==null?void 0:t.user.username}`;return n.innerHTML=`
  <textarea
    class="respond__textarea"
    name="text"
    placeholder="Add a comment..."
  >${e==="Reply"?s+" ":""}</textarea>
  <img
    class="comment__user-image respond__user-image"
    src="${o.image.png}"
    alt="${o.username}"
  />
  <button class="respond__button" type="submit" aria-label=${e}>${e}</button>
`,n},v=(o,e)=>({id:Date.now(),user:o,createdAt:"Just now",content:e,score:0,replies:[]});class p{constructor(e,t){a(this,"currentUser");a(this,"reply");a(this,"vote");a(this,"replyEl");a(this,"replyPanel");a(this,"replyContainerEl");this.currentUser=e,this.reply=t,this.vote=0,this.replyPanel=null,this.replyEl=m("comment","reply"),this.replyContainerEl=m("comment__container"),this.replyEl.appendChild(this.replyContainerEl),this.renderReply(),this.replyContainerEl.addEventListener("click",n=>{n.stopPropagation();const s=n.target;if(s.classList.contains("vote__upvote")&&this.vote<=0)this.handleVote(1);else if(s.classList.contains("vote__downvote")&&this.vote>=0)this.handleVote(-1);else if(s.classList.contains("comment__reply")){if(this.replyPanel)return this.removeReplyPanel();this.showReplyPanel()}else if(s.classList.contains("comment__delete"))this.showDeleteModal(s);else if(s.classList.contains("comment__edit"))this.renderUpdatePanel();else if(s.classList.contains("update__button")){const r=this.replyEl.querySelector("textarea");this.reply.content=(r==null?void 0:r.value)||"",this.renderReply()}})}renderReply(){this.replyContainerEl.innerHTML=d(this.currentUser,this.reply)}handleVote(e){this.reply.score+=e,this.vote+=e,this.renderReply()}showReplyPanel(){this.replyPanel=u(this.currentUser,"Reply",this.reply),this.replyPanel.classList.add("slideDown"),this.replyContainerEl.insertAdjacentElement("afterend",this.replyPanel),this.replyPanel.addEventListener("submit",e=>{e.preventDefault();const t=e.target.text.value;this.addSubReply(t),this.removeReplyPanel(!0)})}removeReplyPanel(e=!1){this.replyPanel instanceof HTMLElement&&(e?(this.replyPanel.remove(),this.replyPanel=null):(this.replyPanel.classList.add("slideUp"),this.replyPanel.addEventListener("animationend",()=>{var t;(t=this.replyPanel)==null||t.remove(),this.replyPanel=null})))}addSubReply(e){if(!e.length)return;const t=v(this.currentUser,e),n=new p(this.currentUser,t);this.replyEl.closest(".replies__container")&&(this.replyEl.closest(".replies__container").insertAdjacentElement("beforeend",n.replyEl),n.replyEl.classList.add("slideDown"))}renderUpdatePanel(){this.replyContainerEl.innerHTML=d(this.currentUser,this.reply,!0)}removeComment(e){e.classList.add("slideUp"),e.addEventListener("animationend",()=>e.remove())}showDeleteModal(e){const t=e.closest(".comment"),n=document.querySelector("#app"),s=document.querySelector("template"),i=document.importNode(s.content,!0).querySelector(".modal");i==null||i.addEventListener("click",c=>{const l=c.target;l.classList.contains("delete__yes")?(this.removeComment(t),this.hideDeleteModal()):l.classList.contains("delete__no")&&this.hideDeleteModal()}),n==null||n.appendChild(i)}hideDeleteModal(){const e=document.querySelector(".modal");e.classList.add("fadeOut"),e.addEventListener("animationend",()=>{e.remove()})}}class y{constructor(e,t){a(this,"currentUser");a(this,"comment");a(this,"vote");a(this,"commentEl");a(this,"commentContainerEl");a(this,"replyPanel");a(this,"repliesContainerEl");this.currentUser=e,this.comment=t,this.vote=0,this.replyPanel=null,this.commentEl=m("comment"),this.commentContainerEl=m("comment__container"),this.repliesContainerEl=m("replies__container"),this.commentEl.appendChild(this.commentContainerEl),this.commentEl.appendChild(this.repliesContainerEl),this.renderUserComment(),this.loadReplies(),this.commentEl.addEventListener("click",n=>{n.stopPropagation();const s=n.target;if(s.classList.contains("vote__upvote")&&this.vote<=0)this.handleVote(1);else if(s.classList.contains("vote__downvote")&&this.vote>=0)this.handleVote(-1);else if(s.classList.contains("comment__reply")){if(this.replyPanel)return this.removeReplyPanel();this.showReplyPanel()}else if(s.classList.contains("comment__delete"))this.showDeleteModal(s);else if(s.classList.contains("comment__edit"))this.renderUpdatePanel();else if(s.classList.contains("update__button")){const r=this.commentContainerEl.querySelector("textarea");this.comment.content=(r==null?void 0:r.value)||"",this.renderUserComment()}})}loadReplies(){var e;(e=this.comment.replies)==null||e.map(t=>{const n=new p(this.currentUser,t);this.repliesContainerEl.appendChild(n.replyEl)})}renderUserComment(){this.commentContainerEl.innerHTML=d(this.currentUser,this.comment)}handleVote(e){this.comment.score+=e,this.vote+=e,this.renderUserComment()}showReplyPanel(){this.replyPanel=u(this.currentUser,"Reply",this.comment),this.replyPanel.classList.add("slideDown"),this.repliesContainerEl.insertAdjacentElement("beforebegin",this.replyPanel),this.replyPanel.addEventListener("submit",e=>{e.preventDefault();const t=e.target.text.value;this.addReply(t),this.removeReplyPanel(!0)})}removeReplyPanel(e=!1){this.replyPanel instanceof HTMLElement&&(e?(this.replyPanel.remove(),this.replyPanel=null):(this.replyPanel.classList.add("slideUp"),this.replyPanel.addEventListener("animationend",()=>{var t;(t=this.replyPanel)==null||t.remove(),this.replyPanel=null})))}addReply(e){if(!e.length)return;const t=v(this.currentUser,e),n=new p(this.currentUser,t);this.repliesContainerEl.appendChild(n.replyEl),n.replyEl.classList.add("slideDown")}renderUpdatePanel(){this.commentContainerEl.innerHTML=d(this.currentUser,this.comment,!0)}removeComment(e){e.classList.add("slideUp"),e.addEventListener("animationend",()=>e.remove())}showDeleteModal(e){const t=e.closest(".comment"),n=document.querySelector("#app"),s=document.querySelector("template"),i=document.importNode(s.content,!0).querySelector(".modal");i==null||i.addEventListener("click",c=>{const l=c.target;l.classList.contains("delete__yes")?(this.removeComment(t),this.hideDeleteModal()):l.classList.contains("delete__no")&&this.hideDeleteModal()}),n==null||n.appendChild(i)}hideDeleteModal(){const e=document.querySelector(".modal");e.classList.add("fadeOut"),e.addEventListener("animationend",()=>{e.remove()})}}class P{constructor(){a(this,"app");a(this,"currentUser");a(this,"comments");a(this,"respondEl");this.app=document.getElementById("app"),this.currentUser=h.currentUser,this.comments=h.comments,this.respondEl=u(this.currentUser,"Send"),this.respondEl.addEventListener("submit",e=>{e.preventDefault();const t=e.target,n=t.text.value;this.addComment(n),t.text.value=""}),this.app.appendChild(this.respondEl)}render(){this.comments.forEach(e=>{const t=new y(this.currentUser,e);this.app.insertBefore(t.commentEl,this.respondEl)})}addComment(e){if(!e.length)return;const t={id:Date.now(),user:this.currentUser,createdAt:"Just now",content:e,score:0,replies:[]},n=new y(this.currentUser,t);n.commentEl.classList.add("slideDown"),this.app.insertBefore(n.commentEl,this.respondEl)}}const C=new P;C.render();
